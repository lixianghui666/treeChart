(()=>{"use strict";var t={701:(t,e,r)=>{r.r(e)},118:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.offset=e.globalConfig=void 0,e.globalConfig={graphEditLineColor:"#2e9dfe",graphEditLineWidth:.8,graphEditConnerRadius:5,graphEditConnerFillStyle:"#ffffff",graphStrokeStyle:"#000000",graphStrokeWidth:2,graphStrokeDashOffset:5,graphTextFillStyle:"#444444",graphFillStyle:"#ea5355",graphTextFontSize:12,graphTextFontWeight:400,graphTextFontFamily:"Arial",graphTextMaxWidth:120,defaultScaleValue:1,padding:5},e.offset={x:0,y:0}},820:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BoardKey=e.GraphType=e.DrawMode=e.GraphDrawStyle=e.StrokeBorderType=e.RectState=e.EventType=e.ParallerVerticalType=e.ParallelHorizationType=void 0,function(t){t[t.TOP=0]="TOP",t[t.CENTER=1]="CENTER",t[t.BOTTOM=2]="BOTTOM"}(e.ParallelHorizationType||(e.ParallelHorizationType={})),function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(e.ParallerVerticalType||(e.ParallerVerticalType={})),function(t){t[t.CONTEXTMENU=0]="CONTEXTMENU",t[t.MOUSEDOWN=1]="MOUSEDOWN",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEUP=3]="MOUSEUP"}(e.EventType||(e.EventType={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.EDIT=1]="EDIT"}(e.RectState||(e.RectState={})),function(t){t[t.DASHED=0]="DASHED",t[t.SOLID=1]="SOLID"}(e.StrokeBorderType||(e.StrokeBorderType={})),function(t){t[t.STROKE=0]="STROKE",t[t.FILL=1]="FILL",t[t.STROKEANDFILL=2]="STROKEANDFILL"}(e.GraphDrawStyle||(e.GraphDrawStyle={})),function(t){t[t.SELECT=0]="SELECT",t[t.DRAG=1]="DRAG",t[t.DRAGCANVAS=2]="DRAGCANVAS",t[t.STERTCHLT=3]="STERTCHLT",t[t.STERTCHRT=4]="STERTCHRT",t[t.STERTCHLB=5]="STERTCHLB",t[t.STERTCHRB=6]="STERTCHRB",t[t.STERTCHT=7]="STERTCHT",t[t.STERTCHB=8]="STERTCHB",t[t.STERTCHL=9]="STERTCHL",t[t.STERTCHR=10]="STERTCHR"}(e.DrawMode||(e.DrawMode={})),function(t){t[t.RECT=0]="RECT",t[t.LINE=1]="LINE",t[t.CIRCLE=2]="CIRCLE",t[t.TEXT=3]="TEXT"}(e.GraphType||(e.GraphType={})),function(t){t[t.NULL=0]="NULL",t[t.SPACE=1]="SPACE",t[t.SHIFT=2]="SHIFT"}(e.BoardKey||(e.BoardKey={}))},503:function(t,e,r){var o,a=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.TextSpan=e.Text=e.Line=e.Circle=e.Rect=e.Graph=void 0;var n=r(976),l=r(118),s=r(820),c=function(){function t(t){this.scale=1,this.rotation=0,this.children=[],this.textFillStyle=l.globalConfig.graphTextFillStyle,this.sameScaleRatio=!1,this.text="";var e=t.points,r=t.ctx,o=t.cvs,a=t.drawStyle,i=void 0===a?s.GraphDrawStyle.FILL:a,n=t.fillStyle,c=void 0===n?l.globalConfig.graphFillStyle:n,f=t.strokeStyle,d=void 0===f?l.globalConfig.graphStrokeStyle:f,h=t.strokeWidth,y=void 0===h?l.globalConfig.graphStrokeWidth:h,T=t.strokeBorderType,u=void 0===T?s.StrokeBorderType.SOLID:T,S=t.scale,p=void 0===S?l.globalConfig.defaultScaleValue:S,x=t.children,g=void 0===x?[]:x,E=t.text,w=void 0===E?"":E,C=t.fontSize,R=void 0===C?l.globalConfig.graphTextFontSize:C,v=t.fontFamily,b=void 0===v?l.globalConfig.graphTextFontFamily:v,D=t.fontWeight,L=void 0===D?l.globalConfig.graphTextFontWeight:D,M=e.reduce((function(t,e){var r=e[0];return Math.min(r,t)}),e[0][0]),k=e.reduce((function(t,e){var r=e[0];return Math.max(r,t)}),e[0][0]),m=e.reduce((function(t,e){e[0];var r=e[1];return Math.min(r,t)}),e[0][1]),A=e.reduce((function(t,e){e[0];var r=e[1];return Math.max(r,t)}),e[0][1]);this.__config=t,this.x=M,this.x1=k,this.y=m,this.y1=A,this.ctx=r,this.cvs=o,this.drawStyle=i,this.strokeStyle=d,this.strokeWidth=y,this.fillStyle=c,this.strokeBorderType=u,this.scale=p,this.children=g,this.text=w,this.fontSize=R*p,this.fontFamily=b,this.fontWeight=L,this.originPos={x:M,y:m,x1:k,y1:A}}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t},enumerable:!1,configurable:!0}),t.prototype.draw=function(){},t.prototype.editDraw=function(){var t=this,e=t.x,r=t.y,o=t.x1,a=t.y1,i=t.cvs,n=t.ctx;new f({points:[[e,r],[o,a]],cvs:i,ctx:n,r:0,state:s.RectState.DEFAULT,strokeStyle:l.globalConfig.graphEditLineColor,strokeWidth:l.globalConfig.graphEditLineWidth,drawStyle:s.GraphDrawStyle.STROKE}).draw()},t}();e.Graph=c;var f=function(t){function e(e){var r=t.call(this,e)||this;r.type=s.GraphType.RECT;var o=e.r,a=e.state,i=void 0===a?s.RectState.DEFAULT:a;return r.r=o,r.state=i,r}return a(e,t),e.prototype.draw=function(){var t=this,e=t.x,r=t.y,o=t.x1,a=t.y1,i=t.r,c=t.fillStyle,f=t.text,h=t.ctx,T=t.cvs,u=t.strokeBorderType,S=t.strokeStyle,p=t.strokeWidth,x=t.drawStyle,g=t.scale,E=t.state;e+=l.offset.x,o+=l.offset.x,r+=l.offset.y,a+=l.offset.y,h.beginPath(),h.fillStyle=c,h.strokeStyle=S,h.lineWidth=p;var w=0;switch(u===s.StrokeBorderType.DASHED&&(w=l.globalConfig.graphStrokeDashOffset),h.lineDashOffset=w,h.setLineDash([w]),E===s.RectState.DEFAULT&&(h.shadowColor="rgba(0,0,0,.05)",h.shadowBlur=10,h.shadowOffsetX=h.shadowOffsetY=10),h.moveTo(e+i,r),h.arc(o-i,r+i,i,(0,n.degToArc)(270),(0,n.degToArc)(360)),h.arc(o-i,a-i,i,(0,n.degToArc)(0),(0,n.degToArc)(90)),h.arc(e+i,a-i,i,(0,n.degToArc)(90),(0,n.degToArc)(180)),h.arc(e+i,r+i,i,(0,n.degToArc)(180),(0,n.degToArc)(270)),h.closePath(),x){case s.GraphDrawStyle.FILL:h.fill();break;case s.GraphDrawStyle.STROKEANDFILL:h.fill(),h.stroke();break;default:h.stroke()}return f&&new y({text:f,points:[[e+(o-e)/2-l.offset.x,r+(a-r)/2-l.offset.y]],ctx:h,cvs:T,scale:1,fontSize:l.globalConfig.graphTextFontSize*g}).draw(),h.closePath(),E===s.RectState.EDIT&&[[e,r],[e,a],[o,r],[o,a]].map((function(t){var e=t[0],r=t[1];return new d({points:[[e-l.offset.x,r-l.offset.y]],r:l.globalConfig.graphEditConnerRadius,strokeStyle:l.globalConfig.graphEditLineColor,strokeWidth:l.globalConfig.graphEditLineWidth,fillStyle:l.globalConfig.graphEditConnerFillStyle,cvs:T,ctx:h,drawStyle:s.GraphDrawStyle.STROKEANDFILL}).draw()})),this},e}(c);e.Rect=f;var d=function(t){function e(e){var r=t.call(this,e)||this;r.type=s.GraphType.CIRCLE;var o=e.r,a=e.scale,i=void 0===a?1:a,n=e.strokeBorderType,l=void 0===n?s.StrokeBorderType.SOLID:n,c=e.rotation,f=void 0===c?0:c,d=e.sAngle,h=void 0===d?0:d,y=e.eAngle,T=void 0===y?360:y,u=r,S=u.x,p=u.y;return r.scale=i,r.x=S-o,r.y=p-o,r.r=o*i,r.strokeBorderType=l,r.x1=S+o,r.y1=p+o,r.rotation=f,r.sAngle=h,r.eAngle=T,r}return a(e,t),e.prototype.draw=function(){var t=this,e=t.ctx,r=t.x,o=t.y,a=t.x1,i=t.y1,c=(t.r,t.fillStyle),f=t.drawStyle,d=t.strokeStyle,h=t.strokeWidth,y=t.rotation,T=t.sAngle,u=t.eAngle,S=(a-r)/2,p=(i-o)/2;switch(r+=l.offset.x,o+=l.offset.y,e.beginPath(),e.fillStyle=c,e.lineWidth=h,e.strokeStyle=d,e.lineDashOffset=0,e.setLineDash([0]),e.ellipse(r+S,o+p,Math.abs(S),Math.abs(p),y,(0,n.degToArc)(T),(0,n.degToArc)(u)),f){case s.GraphDrawStyle.FILL:e.fill();break;case s.GraphDrawStyle.STROKEANDFILL:e.fill(),e.stroke();break;default:e.stroke()}return e.closePath(),this},e}(c);e.Circle=d;var h=function(t){function e(e){var r=t.call(this,e)||this;return r.type=s.GraphType.LINE,r}return a(e,t),e.prototype.draw=function(){var t=this,e=t.ctx,r=t.x,o=t.y,a=t.x1,i=t.y1,n=t.strokeStyle,s=t.strokeWidth;r+=l.offset.x,o+=l.offset.y,e.beginPath(),e.lineWidth=s,e.strokeStyle=n,e.moveTo(r,o),e.lineTo(a,i),e.stroke(),e.closePath()},e}(c);e.Line=h;var y=function(t){function e(e){var r=t.call(this,e)||this;r.type=s.GraphType.TEXT;var o=l.globalConfig.padding;return r.padding=o,r.sameScaleRatio=!0,r}return a(e,t),Object.defineProperty(e.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t},enumerable:!1,configurable:!0}),e.prototype.draw=function(){var t=this,e=this,r=e.__config,o=e.x,a=e.y,n=e.padding,s=e.children,c=r.text,f=r.ctx,d=(r.fontWeight,r.fontSize),h=(void 0===d&&l.globalConfig.graphTextFontSize,r.fontFamily,c.split("\n"));if(a+=l.offset.y,""!==c.trim())return h.forEach((function(e){var c=f.measureText(e),d=c.width,h=c.fontBoundingBoxAscent+c.fontBoundingBoxDescent;s.push(new T(i(i({},r),{points:[[t.x+l.offset.x,a]],text:e})).draw()),a+=h+2*n,o=Math.max(o,t.x+d+n)})),this.x1===this.x&&(this._x1=o+n,this._y1=a+n,this.originPos={x:this.x,y:this.y,y1:this.y1,x1:this.x1}),this},e}(c);e.Text=y;var T=function(t){function e(e){return t.call(this,e)||this}return a(e,t),e.prototype.draw=function(){var t=this,e=t.ctx,r=t.x,o=t.y,a=t.text,i=t.padding,n=t.fontSize,l=(t.fontFamily,t.fontWeight,t.fillStyle),c=t.drawStyle;return e.fillStyle=l,e.textBaseline="top",e.font="".concat(n,"px oblique normal Microsoft YaiHei"),c===s.GraphDrawStyle.FILL?e.fillText(a,r+i,o+i):e.strokeText(a,r+i,o+i),this},e}(y);e.TextSpan=T},976:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=e.enlargePx=e.scalePx=e.degToArc=void 0;e.degToArc=function(t){return t/180*Math.PI};e.scalePx=function(t){return t*$(window).width()/1440};e.enlargePx=function(t){return 1440*t/$(window).width()};e.throttle=function(t,e){var r=!0;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];r&&(r=!1,t.apply(void 0,o)),setTimeout((function(){return r=!0}),e)}}}},e={};function r(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,r),i.exports}r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};(()=>{r(701);var t,e,o=r(976),a=r(820),i=r(503),n=r(118),l=$(".treeChart"),s=l[0].getContext("2d"),c=$(".treeChart_bg"),f=c[0].getContext("2d"),d=a.BoardKey.NULL,h=$(window).width(),y=$(window).height(),T=[new i.Rect({points:[[200,300],[340,336]],ctx:s,cvs:l,scale:1,r:0,strokeWidth:2,drawStyle:a.GraphDrawStyle.STROKE}),new i.Rect({points:[[400,200],[540,236]],ctx:s,cvs:l,scale:1,r:3,strokeWidth:2,drawStyle:a.GraphDrawStyle.STROKE}),new i.Circle({points:[[540,236]],r:50,cvs:l,ctx:s,drawStyle:a.GraphDrawStyle.STROKE}),new i.Text({points:[[100,100]],text:"测试，\n哈哈1111\n111111",cvs:l,ctx:s})],u=0,S=0,p=0,x=0,g=0,E=0,w=null;$(window).resize((function(){h=$(window).width(),y=$(window).height(),l[0].style.width=c[0].style.width=h+"px",l[0].style.height=c[0].style.height=y+"px",l[0].width=c[0].width=h*devicePixelRatio,l[0].height=c[0].height=y*devicePixelRatio,s.scale(devicePixelRatio,devicePixelRatio),f.scale(devicePixelRatio,devicePixelRatio),v(),b()})),$(window).resize(),$(document).mousedown((function(r){var o="";if(u=g=r.clientX-n.offset.x,S=E=r.clientY-n.offset.y,d===a.BoardKey.SPACE)t=a.DrawMode.DRAGCANVAS,o="cursor-drag-bg-down",e=null;else if(null!==e&&D(e,u,S)||L(l,s,!0)){if(D(e,u,S)){o=Array.from($("body")[0].classList)[0]||"cursor-drag";var i=e.x,c=e.x1,f=e.y,h=e.y1;e.originPos={x:i,x1:c,y:f,y1:h},e.children.forEach((function(t){var e=t.x,r=t.x1,o=t.y,a=t.y1;t.originPos={x:e,x1:r,y:o,y1:a}})),t=a.DrawMode[{"cursor-lt":"STERTCHLT","cursor-rt":"STERTCHRT","cursor-rb":"STERTCHRB","cursor-lb":"STERTCHLB","cursor-t":"STERTCHT","cursor-r":"STERTCHR","cursor-b":"STERTCHB","cursor-l":"STERTCHL"}[o]]||a.DrawMode.DRAG}}else e=null;t||(t=a.DrawMode.SELECT),$("body").attr("class",o)})),$(document).mousemove((function(r){switch(p=r.clientX-n.offset.x,x=r.clientY-n.offset.y,t){case a.DrawMode.SELECT:!function(t,e,r,o,l,s){w=new i.Rect({points:[[t,e],[r,o]],r:0,ctx:s,cvs:l,drawStyle:a.GraphDrawStyle.STROKEANDFILL,strokeStyle:n.globalConfig.graphEditLineColor,fillStyle:"rgba(47,157,254,.05)",strokeWidth:.3,scale:1})}(u,S,p,x,l,s);break;case a.DrawMode.DRAG:!function(t,r,o,a){if(!e)return;var i=o-t,n=a-r;e.x+=i,e.y+=n,e.x1+=i,e.y1+=n,e.children.forEach((function(t){t.x+=i,t.x1+=i,t.y+=n,t.y1+=n})),v()}(g,E,p,x);break;case a.DrawMode.DRAGCANVAS:!function(t,e,r,o){n.offset.x+=r-t,n.offset.y+=o-e,v()}(g,E,p,x);break;case a.DrawMode.STERTCHL:M(p,"x");break;case a.DrawMode.STERTCHR:M(p,"x1");break;case a.DrawMode.STERTCHT:M(x,"y");break;case a.DrawMode.STERTCHB:M(x,"y1");break;case a.DrawMode.STERTCHLT:k(p,x,"x","y");break;case a.DrawMode.STERTCHRT:k(p,x,"x1","y");break;case a.DrawMode.STERTCHLB:k(p,x,"x","y1");break;case a.DrawMode.STERTCHRB:k(p,x,"x1","y1")}if(e&&null===t&&e.type===a.GraphType.RECT){$("body").attr("class","");var o=e.x,c=e.y,f=e.x1,d=e.y1,h=n.globalConfig.graphEditConnerRadius;[[o,c],[f,c],[f,d],[o,d]].some((function(t,e){var r=t[0],o=t[1];return p>=r-h&&p<=r+h&&x>=o-h&&x<=o+h&&($("body").addClass(["cursor-lt","cursor-rt","cursor-rb","cursor-lb"][e]),!0)}))||[p>o+h&&p<f-h&&x>c-h&&x<c+h,x>c+h&&x<d-h&&p>f-h&&p<f+h,p>o+h&&p<f-h&&x>d-h&&x<d+h,x>c+h&&x<d-h&&p>o-h&&p<o+h].some((function(t,e){return t&&$("body").addClass(["cursor-t","cursor-r","cursor-b","cursor-l"][e])}))}g=p,E=x,v()})),$(document).mouseup((function(){switch(t){case a.DrawMode.SELECT:L(l,s);break;case a.DrawMode.DRAGCANVAS:d===a.BoardKey.SPACE&&R({})}t=null,w=null,e&&(m(e),e.children.forEach((function(t){return m(t)}))),v()}));var C=(0,o.throttle)((function(t){var e=t.originalEvent,r=e.deltaX,o=e.deltaY;n.offset.x-=r/2,n.offset.y-=o/2,b(),v()}),0);$(document).on("mousewheel",C);var R=function(e){switch(e.key){case"Shift":d=a.BoardKey.SHIFT;break;case" ":d=a.BoardKey.SPACE}d===a.BoardKey.SHIFT&&t>=a.DrawMode.STERTCHLT&&t<=a.DrawMode.STERTCHRB?k(p,x,[a.DrawMode.STERTCHLT,a.DrawMode.STERTCHLB].includes(t)?"x":"x1",[a.DrawMode.STERTCHLT,a.DrawMode.STERTCHRT].includes(t)?"y":"y1"):d===a.BoardKey.SPACE&&$("body").addClass("cursor-drag-bg-up")};function v(){var t=l[0],r=t.width,o=t.height;s.clearRect(0,0,r,o),T.forEach((function(t){return t.draw()})),w&&w.draw(),e&&(e.children.length>0&&e.children.forEach((function(t){return t.editDraw()})),e.draw())}function b(){var t=20,e=-n.offset.x%t,r=-n.offset.y%t,o=!1;for(f.clearRect(0,0,h,y);r<y;){for(e=o?e:e+t;e<h;)new i.Rect({points:[[e-n.offset.x,r-n.offset.y],[e-n.offset.x+t,r+t-n.offset.y]],ctx:f,cvs:c,r:0,fillStyle:"rgba(6,13,20,.04)",drawStyle:a.GraphDrawStyle.FILL}).draw(),e+=40;o=!o,e=-n.offset.x%t,r+=t}}function D(t,e,r){if(null==t)return!1;var o=t.x,a=t.y,i=t.x1,l=t.y1,s=Math.min(o,i),c=Math.max(o,i),f=Math.min(a,l),d=Math.max(a,l),h=n.globalConfig.graphEditConnerRadius;return e>=s-h&&e<=c+h&&r>=f-h&&r<=d+h}function L(t,r,o){void 0===o&&(o=!1);var l=Math.abs(u-p),s=Math.abs(S-x),c=T.filter((function(t){var e=t.x,r=t.y,o=t.x1,a=t.y1,i=Math.abs(o-e),n=Math.abs(r-a),c=Math.min(u,p,e,o),f=Math.max(u,p,e,o),d=Math.min(S,x,r,a),h=Math.max(S,x,r,a);return f-c<=l+i&&h-d<=s+n})),f=c.length;if(0==f)return!1;o&&(c=[c.pop()],f=1);for(var h=c[0],y=h.x,g=h.x1,E=h.y,w=h.y1,C=1;C<f;++C){var R=c[C],v=R.x,b=R.x1,D=R.y,L=R.y1;y=Math.min(y,v),g=Math.max(g,b),E=Math.min(E,D),w=Math.max(w,L)}if(d==a.BoardKey.SHIFT&&e){v=e.x,D=e.y,b=e.x1,L=e.y1;y=Math.min(y,v),g=Math.max(g,b),E=Math.min(E,D),w=Math.max(w,L),c=c.concat(e.children)}return 1==c.length&&c[0].type===a.GraphType.LINE||(e=new i.Rect({points:[[y,E],[g,w]],cvs:t,ctx:r,r:0,state:a.RectState.EDIT,strokeStyle:n.globalConfig.graphEditLineColor,strokeWidth:n.globalConfig.graphEditLineWidth,drawStyle:a.GraphDrawStyle.STROKE,children:c})),!0}function M(t,r){e[r]=t;var o=e.originPos,a=r.slice(0,1),i=(e[a+"1"]-e[a])/(o[a+"1"]-o[a]);e.children.forEach((function(t){var r=t.originPos[a]-o[a],n=o[a+"1"]-t.originPos[a+"1"];t[a]=e[a]+r*i,t[a+"1"]=e[a+"1"]-n*i})),v()}function k(t,r,o,i){if(d===a.BoardKey.SHIFT||e.children.length>1||e.children[0].sameScaleRatio){var n=1,l=e.originPos,s=e.x1,c=e.y1,f=e.x,h=e.y,y=l.y1-l.y,T=l.x1-l.x;switch(o+"-"+i){case"x-y":t=s-T*(n=Math.max((s-t)/T,(c-r)/y)),r=c-y*n;break;case"x1-y":t=f+T*(n=Math.max((t-f)/T,(c-r)/y)),r=c-y*n;break;case"x-y1":t=s-T*(n=Math.max((s-t)/T,(r-h)/y)),r=h+y*n;break;case"x1-y1":t=f+T*(n=Math.max((t-f)/T,(r-h)/y)),r=h+y*n}}M(r,i),M(t,o)}$(document).on("contextmenu",(function(t){return t.stopPropagation(),!1})).on("keydown",R).on("keyup",(function(){t>=a.DrawMode.STERTCHLT&&t<=a.DrawMode.STERTCHRB&&k(p,x,[a.DrawMode.STERTCHLT,a.DrawMode.STERTCHLB].includes(t)?"x":"x1",[a.DrawMode.STERTCHLT,a.DrawMode.STERTCHRT].includes(t)?"y":"y1"),d===a.BoardKey.SPACE&&$("body").attr("class",""),d=a.BoardKey.NULL})),v(),b();var m=function(t,e){var r;e?t[e]>t[e+"1"]&&(r=[t[e+"1"],t[e]],t[e]=r[0],t[e+"1"]=r[1]):(m(t,"x"),m(t,"y"))}})()})();